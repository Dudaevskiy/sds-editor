{"version":3,"file":"embed-preset-basic.min.js","sources":["../../../node_modules/just-extend/index.js","../../embed-plugin-utilities/src/string-replace-async.js","../../embed-plugin-utilities/src/insert.js","../../embed-plugin-highlight/src/index.js","../../embed-plugin-emoji/src/index.js","../../embed-plugin-github/src/index.js","../../../node_modules/just-flatten-it/index.js","../../embed-plugin-noembed/src/index.js","../../embed-plugin-noembed/src/noembed-regex.js","../../../node_modules/html-linkify/index.js","../../embed-plugin-url/src/index.js","../../embed-plugin-youtube/src/index.js","../../embed-plugin-facebook/src/index.js","../../embed-plugin-media/src/index.js","../../embed-plugin-instagram/src/index.js","../../../node_modules/is-in-browser/dist/module.js","../../../node_modules/just-truncate/index.js","../../embed-plugin-utilities/src/with-details-template.js","../../embed-plugin-utilities/src/without-details-template.js","../../embed-plugin-base/src/index.js","../../../node_modules/regex-emoji/lib/index.js","../../../node_modules/just-kebab-case/index.js","../../../node_modules/is-dom/index.js","../../../node_modules/just-pluck-it/index.js","../../../node_modules/html-escape/index.js","../../../node_modules/youtube-regex/index.js","../src/index.js"],"sourcesContent":["module.exports = extend;\n\n/*\n  var obj = {a: 3, b: 5};\n  extend(obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 4, b: 5, c: 8}\n\n  var obj = {a: 3, b: 5};\n  extend({}, obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 3, b: 5}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4]}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(true, obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push(4);\n  obj; // {a: 3, b: 5, c: [1, 2, 3]}\n\n  extend({a: 4, b: 5}); // {a: 4, b: 5}\n  extend({a: 4, b: 5}, 3); {a: 4, b: 5}\n  extend({a: 4, b: 5}, true); {a: 4, b: 5}\n  extend('hello', {a: 4, b: 5}); // throws\n  extend(3, {a: 4, b: 5}); // throws\n*/\n\nfunction extend(/* [deep], obj1, obj2, [objn] */) {\n  var args = [].slice.call(arguments);\n  var deep = false;\n  if (typeof args[0] == 'boolean') {\n    deep = args.shift();\n  }\n  var result = args[0];\n  if (!result || (typeof result != 'object' && typeof result != 'function')) {\n    throw new Error('extendee must be an object');\n  }\n  var extenders = args.slice(1);\n  var len = extenders.length;\n  for (var i = 0; i < len; i++) {\n    var extender = extenders[i];\n    for (var key in extender) {\n      if (extender.hasOwnProperty(key)) {\n        var value = extender[key];\n        if (deep && isCloneable(value)) {\n          var base = Array.isArray(value) ? [] : {};\n          result[key] = extend(true, result.hasOwnProperty(key) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n  return result;\n}\n\nfunction isCloneable(obj) {\n  return Array.isArray(obj) || {}.toString.call(obj) == '[object Object]';\n}\n","import extend from \"just-extend\"\n\nfunction matchAll(str, re) {\n  const matches = []\n  let res = re.exec(str)\n\n  while (res) {\n    matches.push(res)\n\n    if (!re.global) {\n      break\n    }\n\n    res = re.exec(str)\n  }\n  return matches\n}\n\nfunction replaceAll(str, matches) {\n  return matches.reverse().reduce(function(res, match) {\n    const prefix = res.slice(0, match.index)\n    const postfix = res.slice(match.index + match[0].length)\n\n    return prefix + match.replacement + postfix\n  }, str)\n}\n\nfunction assignReplacement(match, replacer) {\n  const args = match.concat([match.index, match.input])\n\n  return replacer.apply(null, args).then(function(res) {\n    return extend({}, match, { replacement: res })\n  })\n}\n\nfunction concurrency(matches, replacer) {\n  const promises = matches.map(function(match) {\n    return assignReplacement(match, replacer)\n  })\n\n  return Promise.all(promises)\n}\n\nfunction processString(str, re, replacer) {\n  const matches = matchAll(str, re)\n  const processor = concurrency\n\n  return processor(matches, replacer).then(function(matches) {\n    return replaceAll(str, matches)\n  })\n}\n\nfunction stringReplaceAsync(str, re, replacer) {\n  re.lastIndex = 0\n  try {\n    return Promise.resolve(processString(str, re, replacer))\n  } catch (e) {\n    return Promise.reject(e)\n  }\n}\n\nexport default stringReplaceAsync\n","import extend from \"just-extend\"\nimport stringReplaceAsync from \"./string-replace-async\"\n\nconst anchorRegex = /<a[^>]*>([^<]+)<\\/a>/gi\n\nfunction getAnchorRegex(regex) {\n  return new RegExp(`<a[^>]*>(${regex.source})<\\\\/a>`, \"gi\")\n}\n\n/**\n * Returns the matched regex data or whether the text has any matching string\n * @param regex Regex of the matching pattern\n * @param text String which has to be searched\n * @param test Return boolean or matching array\n * @returns {*} Boolean|Array\n */\nfunction isMatchPresent(regex, text, test = false) {\n  return test ? regex.test(text) : text.match(regex)\n}\n\n/**\n * Tells wheteher the matching string is present inside an anchor tag\n * @param text\n * @returns {*} Boolean\n * @param regex\n */\nfunction isAnchorTagApplied({ result, plugins = [] }, { regex }) {\n  return (\n    getAnchorRegex(regex).test(result) ||\n    plugins.filter(plugin => plugin.id === \"url\").length\n  )\n}\n\nfunction saveServiceName({ _services }, { id }, match) {\n  if (!_services.filter(x => x.match === match).length) {\n    _services.push({ id, match })\n  }\n}\n\nasync function pushEmbedContent(text, options, pluginOptions, index) {\n  const { regex } = pluginOptions\n  await stringReplaceAsync(text, regex, async (...args) => {\n    options._embeds.push({\n      content: await getTemplate(args, options, pluginOptions),\n      index: index || args.find(x => typeof x === \"number\")\n    })\n    saveServiceName(options, pluginOptions, args[0])\n  })\n  return options\n}\n\n/**\n * Save the embed code into an array that can be added later to the end of original string\n * @param opts\n * @param pluginOptions\n */\nasync function saveEmbedData(opts, pluginOptions) {\n  const { regex } = pluginOptions\n  let options = extend({}, opts)\n\n  if (isAnchorTagApplied(options, { regex })) {\n    await stringReplaceAsync(\n      options.result,\n      anchorRegex,\n      async (match, url, index) => {\n        if (!isMatchPresent(regex, match, true)) return match\n        saveServiceName(options, pluginOptions, match)\n        options = await pushEmbedContent(url, options, pluginOptions, index)\n        return match\n      }\n    )\n  } else {\n    options = pushEmbedContent(options.result, options, pluginOptions)\n  }\n\n  return options\n}\n\nfunction getMatch(regex, string) {\n  regex.lastIndex = 0\n  const matches = regex.exec(string)\n  regex.lastIndex = 0\n  return matches\n}\n\nasync function getTemplate(args, options, pluginOptions) {\n  const { _process, template } = pluginOptions\n  let data\n  if (_process) {\n    data = await _process(args, options, pluginOptions)\n  }\n  return template(args, options, pluginOptions, data)\n}\n\nasync function basicReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n  return stringReplaceAsync(result, regex, async (...args) => {\n    saveServiceName(options, pluginOptions, args[0])\n    return replaceUrl || _replaceAnyways\n      ? getTemplate(args, options, pluginOptions)\n      : `${args[0]} ${await getTemplate(args, options, pluginOptions)}`\n  })\n}\n\nasync function anchorReplace(options, pluginOptions) {\n  const { result, replaceUrl } = options\n  const { regex, _replaceAnyways } = pluginOptions\n\n  return stringReplaceAsync(result, anchorRegex, async (match, url) => {\n    if (!isMatchPresent(regex, url, true)) {\n      return match\n    }\n\n    if (!(replaceUrl || _replaceAnyways)) {\n      const args = getMatch(regex, url)\n      saveServiceName(options, pluginOptions, args[0])\n      const t = await getTemplate(args, options, pluginOptions)\n      return args ? match + t : match\n    }\n    return stringReplaceAsync(url, regex, async (...args) => {\n      saveServiceName(options, pluginOptions, args[0])\n      return getTemplate(args, options, pluginOptions)\n    })\n  })\n}\n\n/**\n * Insert the embed code in the original string.\n * @param options\n * @param pluginOptions\n * @returns options\n */\nexport default async function(options, pluginOptions) {\n  const { inlineEmbed } = options\n  const { _ignoreAnchorCheck, _ignoreInlineCheck, regex } = pluginOptions\n\n  if (!inlineEmbed && !_ignoreInlineCheck) {\n    return saveEmbedData(options, pluginOptions)\n  }\n\n  let output\n\n  output =\n    isAnchorTagApplied(options, { regex }) && !_ignoreAnchorCheck\n      ? await anchorReplace(options, pluginOptions)\n      : await basicReplace(options, pluginOptions)\n\n  return extend({}, options, {\n    result: output\n  })\n}\n","import extend from \"just-extend\"\nimport isBrowser from \"is-in-browser\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"highlight\"\n\nexport default function highlight(opts) {\n  const defaultOptions = {\n    id,\n    regex: /(`{3})(\\s|[a-z]+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n    prismjs: !isBrowser ? global.Prism : window.Prism,\n    template(args, options, { prismjs }) {\n      const language = args[2] === \"\\n\" || !args[2] ? \"markup\" : args[2]\n      const code = args[3]\n\n      const className = `language-${language}`\n      return `<pre class=\"${className}\"><code class=\"${className}\">${prismjs.highlight(\n        code,\n        prismjs.languages[language]\n      )}</code></pre>`\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _replaceAnyways: true,\n    _ignoreAnchorCheck: true,\n    _ignoreInlineCheck: true\n  })\n\n  if (!pluginOptions.prismjs) {\n    throw new Error(\n      \"You need to load prismjs as a global variable or pass it in options.\"\n    )\n  }\n\n  return base(pluginOptions)\n}\n\nhighlight.id = id\n","import extend from \"just-extend\"\nimport emojiRegex from \"regex-emoji\"\nimport kebab from \"just-kebab-case\"\n\nconst id = \"emoji\"\n\n// You need emoji.css to run with this plugin. Else you need to pass the\n// template suitable to your needs.\nexport default function emoji(opts) {\n  const defaultOptions = {\n    id,\n    regex: emojiRegex(),\n    template(emojiName) {\n      return `<span class=\"ec ec-${kebab(emojiName)}\"></span>`\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n  return {\n    transform(options) {\n      return Promise.resolve(\n        extend({}, options, {\n          result: options.result.replace(\n            pluginOptions.regex,\n            (match, emojiName) => {\n              options._services.push({ id, match })\n              return pluginOptions.template(emojiName, options, pluginOptions)\n            }\n          )\n        })\n      )\n    }\n  }\n}\n\nemoji.id = id\n","import extend from \"just-extend\"\nimport base from \"embed-plugin-base\"\nimport { withDetailsTemplate } from \"embed-plugin-utilities\"\n\nconst id = \"github\"\n\nasync function _process(args, { fetch }) {\n  const [, user, repo] = args\n\n  try {\n    const res = await fetch(`https://api.github.com/repos/${user}/${repo}`)\n    return res.json()\n  } catch (e) {\n    return {}\n  }\n}\n\nexport default function github(opts) {\n  const defaultOptions = {\n    id,\n    regex: /[^\\.]github.com\\/([\\w\\.\\-]+)\\/([\\w\\.\\-]+[^\\.])/gi,\n\n    async template(\n      args,\n      options,\n      pluginOptions,\n      { owner, description, html_url, full_name }\n    ) {\n      return withDetailsTemplate({\n        thumbnail: owner.avatar_url,\n        url: html_url,\n        description,\n        title: full_name\n      })\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _process\n  })\n  return base(pluginOptions)\n}\n\ngithub.id = id\n","module.exports = flatten;\n\n/*\n  flatten([[1, [2, 3]], [[4, 5], 6, 7, [8, 9]]]);\n  // [1, 2, 3, 4, 5, 6, 7, 8, 9]\n*/\n\nfunction flatten(arr) {\n  if (!Array.isArray(arr)) {\n    throw new Error('expected an array');\n  }\n  var result = [];\n  var len = arr.length;\n  for (var i = 0; i < len; i++) {\n    var elem = arr[i];\n    if (Array.isArray(elem)) {\n      result.push.apply(result, flatten(elem));\n    } else {\n      result.push(elem);\n    }\n  }\n  return result;\n}\n","import extend from \"just-extend\"\nimport isBrowser from \"is-in-browser\"\nimport isDom from \"is-dom\"\nimport getRegex, { isServicePresent } from \"./noembed-regex\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"noEmbed\"\n\n/**\n * Fetches the data from the noembed API\n * @param args\n * @returns {Promise.<*>}\n */\nasync function _process(args, { fetch }) {\n  const url = args[0]\n  try {\n    const res = await fetch(`https://noembed.com/embed?url=${url}`)\n    return await res.json()\n  } catch (e) {\n    return {\n      html: url\n    }\n  }\n}\n\nfunction noEmbed(opts = {}) {\n  const defaultOptions = {\n    id,\n    // Regex to be used to identify noembed supported services.\n    // By default it takes from noembed-regex.js\n    regex: null,\n\n    // In case you want to exclude a few services, you can do it here.\n    // It accepts an array of service names in lowercase.\n    exclude: [],\n\n    twttr: isBrowser ? window.twttr : null,\n\n    onLoad() {},\n\n    async template(args, options, pluginOptions, { html }) {\n      return `<div class=\"ejs-embed\">${html}</div>`\n    },\n\n    _onLoadInternal({ input, result }, { twttr, onLoad }) {\n      if (isServicePresent(\"twitter\", result) && twttr && isDom(input)) {\n        twttr.widgets.load(input)\n        twttr.events.bind(\"loaded\", onLoad)\n      }\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _process\n  })\n\n  if (!opts.regex) {\n    pluginOptions.regex = getRegex(pluginOptions.exclude)\n  }\n\n  return base(pluginOptions)\n}\n\nnoEmbed.id = id\n\nexport default noEmbed\n","import pluck from \"just-pluck-it\"\nimport flatten from \"just-flatten-it\"\n\nconst regexes = [\n  {\n    patterns: [\"https?://soundcloud.com/.*/.[^\\\\s]*\"],\n    name: \"SoundCloud\"\n  },\n  {\n    name: \"slideshare\",\n    patterns: [\n      \"https?://www\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://fr\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://de\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://es\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://pt\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\"\n    ]\n  },\n  {\n    name: \"vimeo\",\n    patterns: [\n      \"https?://vimeo\\\\.com/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/album/.*/video/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/channels/.*/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/groups/.*/videos/.[^\\\\s]*\",\n      \"https?://vimeo\\\\.com/ondemand/.*/.[^\\\\s]*\"\n    ]\n  },\n  {\n    patterns: [\n      \"https?://photos\\\\.app\\\\.net/.*/.[^\\\\s]*\",\n      \"https?://live\\\\.amcharts\\\\.com/.[^\\\\s]*\",\n      \"https?://codepen\\\\.io/.[^\\\\s]*\",\n      \"https?://codepen\\\\.io/.[^\\\\s]*\",\n      \"https?://www\\\\.collegehumor\\\\.com/video/.[^\\\\s]*\",\n      \"https?://www\\\\.dailymotion\\\\.com/video/.[^\\\\s]*\",\n      \"https?://.*\\\\.deviantart\\\\.com/art/.[^\\\\s]*\",\n      \"https?://.*\\\\.deviantart\\\\.com/.*#/d.[^\\\\s]*\",\n      \"https?://dotsub\\\\.com/view/.[^\\\\s]*\",\n      \"https?://.*\\\\.flickr\\\\.com/photos/.[^\\\\s]*\",\n      \"https?://flic\\\\.kr/p/.[^\\\\s]*\",\n      \"https?://.*\\\\.wikimedia\\\\.org/.*_geograph\\\\.org\\\\.uk_.[^\\\\s]*\",\n      \"https?://gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n      \"https?://giphy\\\\.com/gifs/.[^\\\\s]*\",\n      \"https?://media\\\\.giphy\\\\.com/media/.*/giphy\\\\.gif\",\n      \"https?://www\\\\.hulu\\\\.com/watch/.[^\\\\s]*\",\n      \"https?://www\\\\.kickstarter\\\\.com/projects/.[^\\\\s]*\",\n      \"https?://www\\\\.mixcloud\\\\.com/.*/.*/\",\n      \"https?://reddit\\\\.com/r/.*/comments/.*/.[^\\\\s]*\",\n      \"https?://.*\\\\.screen9\\\\.tv/.[^\\\\s]*\",\n      \"https?://www\\\\.scribd\\\\.com/doc/.[^\\\\s]*\",\n      \"https?://.*\\\\.smugmug\\\\.com/.[^\\\\s]*\",\n      \"https?://soundcloud\\\\.com/.[^\\\\s]*\",\n      \"https?://play\\\\.soundsgood\\\\.co/playlist/.[^\\\\s]*\",\n      \"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n      \"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n      \"https?://ted\\\\.com/talks/.[^\\\\s]*\",\n      \"https?://www\\\\.nytimes\\\\.com/svc/oembed\",\n      \"https?://nytimes\\\\.com/.[^\\\\s]*\",\n      \"https?://.*\\\\.nytimes\\\\.com/.[^\\\\s]*\",\n      \"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://twitch\\\\.tv/.[^\\\\s]*\",\n      \"https?://.*\\\\.ustream\\\\.tv/.[^\\\\s]*\",\n      \"https?://.*\\\\.ustream\\\\.com/.[^\\\\s]*\",\n      \"https?://veervr\\\\.tv/videos/.[^\\\\s]*\",\n      \"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n      \"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n      \"https?://player\\\\.vimeo\\\\.com/video/.[^\\\\s]*\",\n      \"https?://vine\\\\.co/v/.[^\\\\s]*\",\n      \"https?://vine\\\\.co/v/.[^\\\\s]*\"\n    ],\n    name: \"oEmbed\"\n  },\n  {\n    name: \"Imgur\",\n    patterns: [\"https?://imgur\\\\.com/(?:[^\\\\/]+/)?[0-9a-zA-Z]+$\"]\n  },\n  {\n    patterns: [\n      \"https?://www\\\\.(dropbox\\\\.com/s/.+\\\\.(?:jpg|png|gif))\",\n      \"https?://db\\\\.tt/[a-zA-Z0-9][^\\\\s]+\"\n    ],\n    name: \"Dropbox\"\n  },\n  // #if IS_CJS\n  {\n    patterns: [\n      \"https?:\\\\/\\\\/(?:[^\\\\.]+\\\\.)?youtube\\\\.com\\\\/watch\\\\/?\\\\?(?:.+&)?v=([^&][^\\\\s]+)\",\n      \"https?://(?:[^\\\\.]+\\\\.)?(?:youtu\\\\.be|youtube\\\\.com/embed)/([a-zA-Z0-9_-][^\\\\s]+)\"\n    ],\n    name: \"YouTube\"\n  },\n  // #endif\n  {\n    patterns: [\n      \"https?://(?:www|mobile\\\\.)?twitter\\\\.com/(?:#!/)?([^/]+)/status(?:es)?/(\\\\d+)\"\n    ],\n    name: \"Twitter\"\n  }\n]\n\nexport default function getRegexes(excludeServices = []) {\n  const includedRegexes = regexes.filter(\n    r => excludeServices.indexOf(r.name.toLowerCase()) === -1\n  )\n  const patterns = flatten(pluck(includedRegexes, \"patterns\"))\n  return new RegExp(patterns.join(\"|\"), \"gi\")\n}\n\nexport function isServicePresent(serviceName, text) {\n  const service = regexes.filter(r => r.name.toLowerCase() === serviceName)[0]\n  const regex = new RegExp(service.patterns.join(\"|\"), \"gi\")\n  return regex.test(text)\n}\n","// Takes plain text and replaces links with HTML anchor elements. Based on\n// https://github.com/thejh/node-linkify\n\"use strict\";\n\n// Link regex\n// See http://daringfireball.net/2010/07/improved_regex_for_matching_urls\nvar rLink = /\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/gi;\n\n// Email regex\nvar rEmail = /\\b(([a-zA-Z0-9\\-\\_\\.])+(\\+[a-zA-Z0-9]*)?@[a-zA-Z\\_\\-]+?(\\.[a-zA-Z]{2,6})+)/gim;\n\nvar escape = require(\"html-escape\");\n\nmodule.exports = function(text, options) {\n\tif ( ! options) options = {};\n\n\tvar retval = \"\", cur = 0, match;\n\n\tvar escapeFn = options.escape === false ? function(str) { return str; } : escape;\n\n\twhile (match = rLink.exec(text)) {\n\t\tretval += escapeFn(text.slice(cur, match.index));\n\t\tretval += anchor(match[0], options.attributes);\n\t\tcur = rLink.lastIndex;\n\t}\n\n\tretval += escapeFn(text.slice(cur));\n\tretval = emails(retval, options.attributes);\n\n\treturn retval;\n};\n\n// Return an anchor element for the url\nfunction anchor(url, attrs) {\n\tvar text = escape(url),\n\t\thref = url;\n\n\t// Ensure protocol at beginning of url\n\tif (!/^[a-zA-Z]{1,6}:/.test(href)) {\n\t\thref = 'http://' + href;\n\t}\n\n\tvar attrsString = combine({ href: href }, attrs);\n\n\treturn \"<a \" + attrsString + \">\" + text + \"</a>\";\n}\n\n// combine attrs objects into single string\nfunction combine() {\n\treturn Array.prototype.slice.call(arguments)\n\t\t.map(attributes)\n\t\t.filter(Boolean)\n\t\t.join(\" \");\n}\n\n// Replace emails in text with anchor elements\nfunction emails(text, attrs) {\n\tvar attrsString = attributes(attrs);\n\n\treturn text.replace(rEmail, function(match, email) {\n\t\tvar elAttrs = attributes({ href: \"mailto:\" + email });\n\t\tif (attrsString) {\n\t\t\telAttrs += \" \" + attrsString;\n\t\t}\n\n\t\treturn \"<a \" + elAttrs + \">\" + escape(email) + \"</a>\";\n\t});\n}\n\nfunction attributes(attrs) {\n\tif ( ! attrs) return \"\";\n\treturn Object.keys(attrs).map(function(name) {\n\t\tvar value = attrs[name];\n\t\treturn escape(name) + \"=\\\"\" + escape(value) + \"\\\"\";\n\t}).join(\" \");\n}\n","import extend from \"just-extend\"\nimport linkify from \"html-linkify\"\n\nconst id = \"url\"\n\nexport default function url(opts) {\n  const defaultOptions = {\n    attributes: {},\n\n    // setting this to true will mess up characters like \"\n    escape: false\n  }\n\n  const { attributes, escape } = extend({}, defaultOptions, opts)\n  return {\n    id,\n    async transform(options) {\n      return extend({}, options, {\n        result: linkify(options.result, { attributes, escape })\n      })\n    }\n  }\n}\n\nurl.id = id\n","import extend from \"just-extend\"\nimport isDom from \"is-dom\"\nimport ytRegex from \"youtube-regex\"\nimport base from \"embed-plugin-base\"\nimport {\n  withDetailsTemplate,\n  withoutDetailsTemplate\n} from \"embed-plugin-utilities\"\n\nconst id = \"youtube\"\nconst baseUrl = \"https://www.youtube.com/\"\n\n/**\n * Decorate data into a simpler structure\n * @param data\n * @returns {{title, thumbnail, rawDescription, views: *, likes: *, description: *, url: string, id, host: string}}\n */\nfunction formatData({ snippet, id }) {\n  return {\n    title: snippet.title,\n    thumbnail: snippet.thumbnails.medium.url,\n    description: snippet.description,\n    url: `${baseUrl}watch?v=${id}`,\n    embedUrl: `${baseUrl}embed/${id}`\n  }\n}\n\n/**\n * Fetch details of a particular youtube video\n * @param id\n * @param gAuthKey\n * @returns {Promise.<*>}\n */\nasync function fetchDetails(id, fetch, gAuthKey) {\n  try {\n    const res = await fetch(\n      `https://www.googleapis.com/youtube/v3/videos?id=${id}&key=${gAuthKey}&part=snippet,statistics`\n    )\n    const data = await res.json()\n    return data.items[0]\n  } catch (e) {\n    console.log(e)\n    return {}\n  }\n}\n\n/**\n * Function executed when a content is rendered on the client site.\n * @param input\n * @param clickClass\n * @param onVideoShow\n * @param height\n */\nfunction onLoad({ input }, { clickClass, onVideoShow, height }) {\n  if (!isDom(input)) {\n    throw new Error(\"input should be a DOM Element.\")\n  }\n  let classes = document.getElementsByClassName(clickClass)\n  for (let i = 0; i < classes.length; i++) {\n    classes[i].onclick = function() {\n      let url = this.getAttribute(\"data-url\")\n      onVideoShow(url)\n      url += \"?autoplay=1\"\n      this.parentNode.innerHTML = withoutDetailsTemplate(url, height, id)\n    }\n  }\n}\n\nfunction _process(args, { fetch }, { gAuthKey, details }) {\n  return details ? fetchDetails(args[1], fetch, gAuthKey) : Promise.resolve()\n}\n\nfunction youtube(opts) {\n  const defaultOptions = {\n    id,\n    regex: ytRegex(),\n    gAuthKey: \"\",\n    details: true,\n    height: 300,\n    clickClass: \"ejs-video-thumb\",\n    onVideoShow() {},\n    _onLoadInternal(options, pluginOptions) {\n      onLoad(options, pluginOptions)\n    },\n    onLoad() {},\n    async template(args, options, { details, height, clickClass }, data) {\n      const embedUrl = `${baseUrl}embed/${args[1]}`\n      return details\n        ? withDetailsTemplate(formatData(data), clickClass, true)\n        : withoutDetailsTemplate(embedUrl, height, id)\n    }\n  }\n\n  if (!opts.gAuthKey) {\n    throw new Error(\"You need to pass google auth key.\")\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts, {\n    _process\n  })\n  return base(pluginOptions)\n}\n\nyoutube.id = id\n\nexport default youtube\n","import extend from \"just-extend\"\nimport { withoutDetailsTemplate } from \"embed-plugin-utilities\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"facebook\"\n\nexport default function facebook(opts) {\n  const defaultOptions = {\n    id,\n    regex: /(https?:\\/\\/)?www\\.facebook\\.com\\/(?:(videos|posts)\\.php\\?v=\\d+|.*?\\/(videos|posts)\\/\\d+\\/?)/gi,\n    height: 225,\n    template(args, options, { height }) {\n      const url = args[0]\n      const type = url.indexOf(\"/videos/\") < 0 ? \"post\" : \"video\"\n      return withoutDetailsTemplate(\n        `https://www.facebook.com/plugins/${type}.php?href=${url}`,\n        height,\n        id\n      )\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n  return base(pluginOptions)\n}\n\nfacebook.id = id\n","import extend from \"just-extend\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"media\"\n\nconst image = [\"gif\", \"jpg\", \"jpeg\", \"tiff\", \"png\", \"svg\", \"webp\"]\nconst video = [\"ogv\", \"webm\", \"mp4\"]\nconst audio = [\"wav\", \"mp3\", \"ogg\"]\n\nexport default function basicImage(opts) {\n  const defaultOptions = {\n    id,\n    regex: new RegExp(\n      `(?:https?)://\\\\S*\\\\.(?:${image.concat(video, audio).join(\"|\")})`,\n      \"gi\"\n    ),\n    template(args) {\n      const url = args[0]\n      const ext = url.split(\".\").slice(-1)[0]\n      if (image.indexOf(ext) >= 0) {\n        return `<img class=\"ejs-embed\" src=\"${url}\"/>`\n      } else if (video.indexOf(ext) >= 0) {\n        return `<video src=\"${url}\" controls class=\"ejs-video\"></video>`\n      } else if (audio.indexOf(ext) >= 0) {\n        return `<audio src=\"${url}\" controls class=\"ejs-audio\"></audio>`\n      }\n    }\n  }\n  const pluginOptions = extend({}, defaultOptions, opts)\n  return base(pluginOptions)\n}\n\nbasicImage.id = id\n","import extend from \"just-extend\"\nimport base from \"embed-plugin-base\"\n\nconst id = \"instagram\"\n\nexport default function instagram(opts) {\n  const defaultOptions = {\n    id,\n    height: 440,\n    regex: /((https?:\\/\\/)(www\\.)?instagram.com\\/p\\/[a-zA-Z0-9_\\-\\=]+)(\\/\\?[a-zA-Z0-9_\\-\\=]+)?/gi,\n    template(args, options, { width, height }) {\n      return `<iframe class=\"ejs-embed ejs-instagram\" src=\"${args[1]}/embed\" height=\"${height}\"></iframe>`\n    }\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n  return base(pluginOptions)\n}\n\ninstagram.id = id\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexport var isBrowser = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) === 'object' && document.nodeType === 9;\n\nexport default isBrowser;\n","module.exports = truncate;\n\n/*\n  truncate('when shall we three meet again', 9); // 'when s...'\n  truncate('when shall we three meet again', 10, ' (etc)'); // 'when (etc)'\n  truncate('when shall we', 15,); // 'when shall we'\n  truncate('when shall we', 15, '(more)'); // 'when shall we'\n  truncate('when shall we', 7, ' (more)'); // ' (more)'\n*/\n\nfunction truncate(str, length, end) {\n  if (length == null || length >= str.length) {\n    return str;\n  }\n  if (end == null) {\n    end = '...';\n  }\n  return str.slice(0, Math.max(0, length - end.length)) + end;\n}\n","import truncate from \"just-truncate\"\n\nexport default function(\n  { url, title, embedUrl, description, thumbnail },\n  thumbClassName,\n  showPlayIcon = false\n) {\nreturn `<div class=\"ejs-preview ejs-embed\"><div class=\"ejs-thumb ${thumbClassName}\" data-url=\"${embedUrl}\" style=\"background-image:url(${thumbnail})\">${showPlayIcon ? '<span>&#9658;</span>' : ''}</div><div class=\"ejs-info\"><h4 class=\"ejs-title\"><a href=\"${url}\">${title}</a></h4><div class=\"ejs-desc\">${truncate(\n    description,\n    150\n  )}</div></div></div>`\n}\n","export default function(embedUrl, height, name) {\n  return `<iframe class=\"ejs-embed ejs-${name}\" src=\"${embedUrl}\" frameBorder=\"0\" height=\"${height}\"></iframe>`\n}\n","import extend from \"just-extend\"\nimport { insert } from \"embed-plugin-utilities\"\n\nexport default opts => {\n  const defaultOptions = {\n    _replaceAnyways: false,\n    _ignoreAnchorCheck: false,\n    _ignoreInlineCheck: false,\n    onLoad() {}\n  }\n\n  const pluginOptions = extend({}, defaultOptions, opts)\n\n  const { _onLoadInternal, onLoad, regex, template, id } = pluginOptions\n\n  if (!regex) {\n    throw new Error(\"regex not passed.\")\n  }\n  if (!template) {\n    throw new Error(\"template not passed.\")\n  }\n\n  return {\n    id,\n\n    async transform(options) {\n      return extend({}, options, await insert(options, pluginOptions))\n    },\n\n    onLoad(options) {\n      if (_onLoadInternal) {\n        _onLoadInternal(options, pluginOptions)\n      }\n      if (onLoad) {\n        onLoad(options, pluginOptions)\n      }\n    }\n  }\n}\n","\"use strict\";\n\n/**\n * emojiRegex\n * Returns the emoji regex value.\n *\n * @name emojiRegex\n * @function\n * @return {RegExp} The emoji regex.\n */\nmodule.exports = function emojiRegex() {\n  return (/:([a-z0-9_\\+\\-]+):/g\n  );\n};","module.exports = kebabCase;\n\n/*\n  kebabCase('the quick brown fox'); // 'the-quick-brown-fox'\n  kebabCase('the-quick-brown-fox'); // 'the-quick-brown-fox'\n  kebabCase('the_quick_brown_fox'); // 'the-quick-brown-fox'\n  kebabCase('theQuickBrownFox'); // 'the-quick-brown-fox'\n  kebabCase('theQuickBrown Fox'); // 'the-quick-brown-fox'\n  kebabCase('thequickbrownfox'); // 'thequickbrownfox'\n  kebabCase('the - quick * brown# fox'); // 'the-quick-brown-fox'\n  kebabCase('theQUICKBrownFox'); // 'the-q-u-i-c-k-brown-fox'\n*/\n\n// any combination of spaces and punctuation characters\n// thanks to http://stackoverflow.com/a/25575009\nvar wordSeparators = /[\\s\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,\\-.\\/:;<=>?@\\[\\]^_`{|}~]+/;\nvar capitals = /[A-Z\\u00C0-\\u00D6\\u00D9-\\u00DD]/g;\n\nfunction kebabCase(str) {\n  //replace capitals with space + lower case equivalent for later parsing\n  str = str.replace(capitals, function(match) {\n    return ' ' + (match.toLowerCase() || match);\n  });\n  return str\n    .trim()\n    .split(wordSeparators)\n    .join('-');\n}\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","module.exports = pluck;\n\n/*\n  var arr = [{a:1, b:2}, {a:4, b:3}, {a:2, b:5}];\n  pluck(arr, 'a'); // [1, 4, 2]\n  var obj = {x: {a:1, b:2}, y: {a:4, b:3}, z: {a:2, b:5}];\n  pluck(obj, 'a'); // {x: 1, y: 4, z: 2}\n*/\n\nfunction pluck(collection, propertyName) {\n  if (!collection || typeof collection != 'object') {\n    return new Error('expected first argument to be an object or array');\n  }\n\n  var result, len, i, keys, key;\n  if (Array.isArray(collection)) {\n    result = [];\n    len = collection.length;\n    for (i = 0; i < len; i++) {\n      result.push(collection[i][propertyName]);\n    }\n  } else {\n    result = {};\n    keys = Object.keys(collection);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      result[key] = collection[key][propertyName];\n    }\n  }\n  return result;\n}\n","\"use strict\";\n\n/* From Twitter's Hogan.js */\n\nvar rAmp = /&/g,\n\trLt = /</g,\n\trGt = />/g,\n\trApos =/\\'/g,\n\trQuot = /\\\"/g,\n\thChars =/[&<>\\\"\\']/;\n\nfunction coerceToString(val) {\n\treturn String((val === null || val === undefined) ? '' : val);\n}\n\nmodule.exports = function(str) {\n\tstr = coerceToString(str);\n\n\treturn hChars.test(str)\n\t\t? str\n\t\t\t.replace(rAmp,'&amp;')\n\t\t\t.replace(rLt,'&lt;')\n\t\t\t.replace(rGt,'&gt;')\n\t\t\t.replace(rApos,'&#39;')\n\t\t\t.replace(rQuot, '&quot;')\n\t\t: str;\n};\n","/**\n * youtube-regex <https://github.com/tunnckoCore/youtube-regex>\n *\n * Copyright (c) 2014 Charlike Mike Reagent, contributors.\n * Released under the MIT license.\n */\n\n'use strict';\n\nmodule.exports = function youtubeRegex() {\n  var regex = /(?:youtube\\.com\\/\\S*(?:(?:\\/e(?:mbed))?\\/|watch\\/?\\?(?:\\S*?&?v\\=))|youtu\\.be\\/)([a-zA-Z0-9_-]{6,11})/g;\n\n  return regex;\n};\n","import extend from \"just-extend\"\nimport highlight from \"embed-plugin-highlight\"\nimport emoji from \"embed-plugin-emoji\"\nimport github from \"embed-plugin-github\"\nimport noEmbed from \"embed-plugin-noembed\"\nimport url from \"embed-plugin-url\"\nimport youtube from \"embed-plugin-youtube\"\nimport facebook from \"embed-plugin-facebook\"\nimport media from \"embed-plugin-media\"\nimport instagram from \"embed-plugin-instagram\"\n\nexport default function(options) {\n  const defaultOptions = {\n    exclude: []\n  }\n\n  const presetOptions = extend({}, defaultOptions, options)\n\n  const pluginNames = [\n    url,\n    emoji,\n    github,\n    noEmbed,\n    youtube,\n    facebook,\n    highlight,\n    media,\n    instagram\n  ]\n  const plugins = pluginNames.map(plugin => {\n    const { id } = plugin\n    const pluginOptions = presetOptions[id]\n\n    if (presetOptions.exclude.indexOf(plugin.id) === -1) {\n      if (id === \"youtube\" || id === \"map\") {\n        return plugin(\n          extend(\n            {},\n            {\n              gAuthKey: options.gAuthKey\n            },\n            pluginOptions\n          )\n        )\n      } else if (id === \"noEmbed\") {\n        return plugin(\n          extend({}, pluginOptions, {\n            exclude: [\"youtube\"]\n          })\n        )\n      }\n      return plugin(pluginOptions)\n    }\n    return null\n  })\n\n  return plugins.filter(plugin => !!plugin)\n}\n"],"names":["extend","args","slice","call","arguments","deep","shift","result","Error","extenders","len","length","i","extender","key","hasOwnProperty","value","obj","Array","isArray","toString","isCloneable","base","concurrency","matches","replacer","const","promises","map","match","concat","index","input","apply","then","res","replacement","assignReplacement","Promise","all","stringReplaceAsync","str","re","lastIndex","resolve","exec","push","global","matchAll","reverse","reduce","prefix","postfix","replaceAll","processString","e","reject","isMatchPresent","regex","text","test","isAnchorTagApplied","ref","ref$1","RegExp","getAnchorRegex","plugins","filter","plugin","id","saveServiceName","_services","x","pushEmbedContent","options","pluginOptions","getTemplate","_embeds","content","$await_7","find","template","data","_process","$await_11","highlight","opts","defaultOptions","prismjs","isBrowser","window","Prism","language","code","className","languages","_replaceAnyways","_ignoreAnchorCheck","_ignoreInlineCheck","emoji","emojiRegex","emojiName","kebab","transform","replace","fetch","user","repo","$await_2","json","github","owner","description","html_url","full_name","withDetailsTemplate","thumbnail","avatar_url","url","title","flatten","arr","elem","html","noEmbed","exclude","twttr","onLoad","_onLoadInternal","serviceName","service","regexes","r","name","toLowerCase","patterns","join","isServicePresent","isDom","widgets","load","events","bind","excludeServices","includedRegexes","indexOf","pluck","getRegex","anchor","attrs","escape","href","prototype","attributes","Boolean","combine","Object","keys","linkify","gAuthKey","console","log","$await_3","items","fetchDetails","youtube","ytRegex","details","height","clickClass","onVideoShow","let","classes","document","getElementsByClassName","onclick","this","getAttribute","parentNode","innerHTML","withoutDetailsTemplate","embedUrl","baseUrl","snippet","thumbnails","medium","formatData","facebook","type","basicImage","image","video","audio","ext","split","instagram","_typeof","Symbol","iterator","constructor","nodeType","anchorRegex","inlineEmbed","replaceUrl","string","getMatch","t","$await_14","anchorReplace","$await_12","basicReplace","output","$await_17","$await_9","saveEmbedData","end","Math","max","thumbClassName","showPlayIcon","truncate","insert","$await_1","capitals","trim","wordSeparators","val","Node","nodeName","collection","propertyName","rAmp","rLt","rGt","rApos","rQuot","hChars","String","undefined","coerceToString","rLink","rEmail","retval","cur","escapeFn","attrsString","email","elAttrs","emails","presetOptions","media"],"mappings":"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"}